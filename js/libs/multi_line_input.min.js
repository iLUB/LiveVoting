(function(a){a.fn.extend({multi_line_input:function(h,l){var c=a.extend({unique_values:false},l);var h=h;var e=this;var k=this;var b=0;var j=a(this).find(".multi_input_line").first();var d=function(n){var m=n.find(".multi_icons_wrapper").last().width();n.find(".ml-input").each(function(){m=m+a(this).width()});m=m-n.find(".ml-input").last().width();n.find(".ml-input").last().width(n.width()-m-100)};a(this).find(".multi_input_line").each(function(){d(a(this))});var f="empty";var g=function(m){m.hide();m.removeClass("multi_input_line");m.find("textarea[name^='"+e.attr("id")+"'], input[name^='"+e.attr("id")+"'], select[name^='"+e.attr("id")+"']").each(function(){var n=a(this).attr("name");var q=e.attr("id");var o=new RegExp("^"+q+"[[0-9]+](.*)$","g");var p=o.exec(n);n=f+"["+b+"]"+p[1];a(this).attr("name",n)})};g(j);var i=function(m,o){var o=o||false;var n=m;a(m).find(".add_button").on("click",function(q){var p=j.clone();p.show();a(p).addClass("multi_input_line");i(p);a(e).append(p);a(e).change();a(document).trigger("multi_line_add_button",[n,p]);a(e).find("textarea, input[type='text']").last().focus();return false});a(m).find(".up_button").on("click",function(p){a(this).parents(".multi_input_line").insertBefore(a(this).parents(".multi_input_line").prev());return false});a(m).find(".down_button").on("click",function(p){a(this).parents(".multi_input_line").insertAfter(a(this).parents(".multi_input_line").next());return false});a(m).find(".remove_button").on("click",function(p){n.remove();a(e).change();a(document).trigger("multi_line_remove_button",n);return false});if(!o){n.find("textarea[name^='"+f+"'], input[name^='"+f+"'], select[name^='"+f+"']").each(function(){var p=a(this).attr("name");var s=e.attr("id");a(this).val("");var q=new RegExp("^"+f+"[[0-9]+](.*)$","g");var r=q.exec(p);p=s+"["+b+"]"+r[1];a(this).attr("name",p)})}b++};a(this).find(".multi_input_line").each(function(){i(a(this),true)});a(e).change();return e}})}(jQuery));