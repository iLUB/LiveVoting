var vis=function(){var a,b,c={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(a in c)if(a in document){b=c[a];break}return function(d){return d&&document.addEventListener(b,d),!document[a]}}();vis(function(){vis()?setTimeout(function(){console.log("tab is visible - has focus")},300):(window.location.replace("https://www.google.com"),console.log("tab is invisible - has blur"))});